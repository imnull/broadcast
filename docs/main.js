"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[792],{323:function(e,n,t){var s=t(472),a=t.n(s),o=t(297),i=t.n(o)()(a());i.push([e.id,".live-canvas{background-color:#f1f1f1}",""]),n.A=i},35:function(e,n,t){var s=t(472),a=t.n(s),o=t(297),i=t.n(o)()(a());i.push([e.id,".menu{display:flex;flex-direction:row;background-color:#039;font-size:15px}.menu .menu-item{padding:10px 15px;color:#eee;text-decoration:none}.menu .menu-item:hover{color:#fff}.menu .menu-item.active{background-color:#eee;color:#333}.menu .menu-item.active:hover{color:#000}",""]),n.A=i},793:function(e,n,t){var s=t(399),a=t(755),o=t(567),i=t(631),c=t(324),l=t(591),r=t.n(l),d=t(740),m=t.n(d),u=t(128),v=t.n(u),h=t(855),x=t.n(h),f=t(51),j=t.n(f),p=t(656),b=t.n(p),g=t(35),A={};A.styleTagTransform=b(),A.setAttributes=x(),A.insert=v().bind(null,"head"),A.domAPI=m(),A.insertStyleElement=j(),r()(g.A,A),g.A&&g.A.locals&&g.A.locals;var k=()=>(0,s.jsxs)("nav",{className:"menu",children:[(0,s.jsx)(i.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/",children:"Home"}),(0,s.jsx)(i.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/live-canvas/live-canvas/red",children:"Red Canvas"}),(0,s.jsx)(i.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/live-canvas/live-canvas/blue",children:"Blue Canvas"}),(0,s.jsx)(i.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/live-canvas/live-canvas/yellow",children:"Yellow Canvas"}),(0,s.jsx)(i.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/about",children:"About"})]}),y=()=>(0,s.jsx)("div",{children:"Home"}),E=Object.defineProperty;class C extends BroadcastChannel{constructor(e){var n,t;super(e),((e,n,t)=>{n in e?E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t})(this,"symbol"!=typeof(n="ondata")?n+"":n,t),this.addEventListener("message",(e=>{const n=e.data,t=new CustomEvent("data",{detail:n});this.dispatchEvent(t),"function"==typeof this.ondata&&this.ondata(t)}))}addEventListener(e,n,t){super.addEventListener(e,n,t)}sendData(e){this.postMessage(e)}}const w=e=>new C(e);var L=t(323),N={};N.styleTagTransform=b(),N.setAttributes=x(),N.insert=v().bind(null,"head"),N.domAPI=m(),N.insertStyleElement=j(),r()(L.A,N),L.A&&L.A.locals&&L.A.locals;const S=(e,n,t,s="#222",a=2)=>{e.save(),e.lineCap="round",e.lineWidth=a,e.strokeStyle=s,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke(),e.restore()},T=e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height)};var B=e=>{const{channel:n,color:t="#222",size:a=2,width:i=640,height:c=360,onCanvas:l}=e,[r,d]=(0,o.useState)(null),[m,u]=(0,o.useState)(2);return(0,o.useEffect)((()=>{if(r){const e=r.getContext("2d"),s=w(n);s.ondata=n=>{const t=n.detail;if("track"===t.command){const{from:n,to:s,color:a="#222",size:o=2}=t;S(e,s,n,a,o)}else"reset"===t.command&&T(e)};const{left:a,top:o}=r.getBoundingClientRect();let i=0,c=0,l=!1;const d=e=>{const n=e.clientX-a,t=e.clientY-o;i=n,c=t,l=!0},u=n=>{const r=n.clientX-a,d=n.clientY-o;if(l){const n={x:i,y:c},a={x:r,y:d};S(e,a,n,t,m),s.sendData({command:"track",from:n,to:a,color:t,size:m})}i=r,c=d},v=()=>{l=!1};return r.addEventListener("mousedown",d),document.addEventListener("mouseup",v),document.addEventListener("mousemove",u),()=>{s.close(),r.removeEventListener("mousedown",d),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",u)}}}),[r,n,t,a,m]),(0,o.useEffect)((()=>{const e=w(n);e.sendData({command:"reset"}),e.close()}),[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("canvas",{ref:d,className:"live-canvas",width:i,height:c}),(0,s.jsx)("input",{value:m,type:"range",min:1,max:20,onChange:e=>{u(Number(e.target.value))}}),(0,s.jsx)("button",{disabled:!r,onClick:()=>{const e=w(n);if(e.sendData({command:"reset"}),e.close(),!r)return;const t=r.getContext("2d");T(t)},children:"reset"})]})},z=()=>{const{channel:e="",color:n="#222"}=(0,c.g)();return(0,s.jsxs)("div",{className:"live-canvas-page",children:[(0,s.jsxs)("div",{children:["Live Canvas [",e,"] [",n,"]"]}),(0,s.jsx)(B,{channel:e,color:n})]})},D=()=>(0,s.jsx)("div",{children:"About"}),I=()=>(0,s.jsx)(o.StrictMode,{children:(0,s.jsxs)(i.I9,{children:[(0,s.jsx)(k,{}),(0,s.jsxs)(c.BV,{children:[(0,s.jsx)(c.qh,{path:"/",element:(0,s.jsx)(y,{})}),(0,s.jsx)(c.qh,{path:"/live-canvas/:channel/:color",element:(0,s.jsx)(z,{})}),(0,s.jsx)(c.qh,{path:"/about",element:(0,s.jsx)(D,{})})]})]})});const P=document.getElementById("root");P&&(0,a.H)(P).render((0,s.jsx)(I,{}))}},function(e){e.O(0,[411,13],(function(){return e(e.s=793)})),e.O()}]);