"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[792],{681:function(e,t,n){var s=n(472),o=n.n(s),a=n(297),c=n.n(a)()(o());c.push([e.id,"body{user-select:none;touch-action:none}",""]),t.A=c},323:function(e,t,n){var s=n(472),o=n.n(s),a=n(297),c=n.n(a)()(o());c.push([e.id,".live-canvas{background-color:#f1f1f1}",""]),t.A=c},35:function(e,t,n){var s=n(472),o=n.n(s),a=n(297),c=n.n(a)()(o());c.push([e.id,".menu{display:flex;flex-direction:row;background-color:#039;font-size:15px}.menu .menu-item{padding:10px 15px;color:#eee;text-decoration:none}.menu .menu-item:hover{color:#fff}.menu .menu-item.active{background-color:#eee;color:#333}.menu .menu-item.active:hover{color:#000}",""]),t.A=c},331:function(e,t,n){var s=n(399),o=n(755),a=n(567),c=n(631),i=n(324),l=n(591),r=n.n(l),d=n(740),u=n.n(d),m=n(128),v=n.n(m),h=n(855),x=n.n(h),f=n(51),p=n.n(f),A=n(656),b=n.n(A),j=n(35),g={};g.styleTagTransform=b(),g.setAttributes=x(),g.insert=v().bind(null,"head"),g.domAPI=u(),g.insertStyleElement=p(),r()(j.A,g),j.A&&j.A.locals&&j.A.locals;var y=()=>(0,s.jsxs)("nav",{className:"menu",children:[(0,s.jsx)(c.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/",children:"Home"}),(0,s.jsx)(c.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/live-canvas/live-canvas/red",children:"Red Canvas"}),(0,s.jsx)(c.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/live-canvas/live-canvas/blue",children:"Blue Canvas"}),(0,s.jsx)(c.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/live-canvas/live-canvas/yellow",children:"Yellow Canvas"}),(0,s.jsx)(c.k2,{className:e=>e.isActive?"menu-item active":"menu-item",to:"/about",children:"About"})]}),k=()=>(0,s.jsx)("div",{children:"Home"}),E=Object.defineProperty;class C extends BroadcastChannel{constructor(e){var t,n;super(e),((e,t,n)=>{t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(t="ondata")?t+"":t,n),this.addEventListener("message",(e=>{const t=e.data,n=new CustomEvent("data",{detail:t});this.dispatchEvent(n),"function"==typeof this.ondata&&this.ondata(n)}))}addEventListener(e,t,n){super.addEventListener(e,t,n)}sendData(e){this.postMessage(e)}}const w=e=>new C(e);var L=n(323),N={};N.styleTagTransform=b(),N.setAttributes=x(),N.insert=v().bind(null,"head"),N.domAPI=u(),N.insertStyleElement=p(),r()(L.A,N),L.A&&L.A.locals&&L.A.locals;const T=void 0!==(null==document?void 0:document.ontouchstart),S=T?"touchstart":"mousedown",B=T?"touchmove":"mousemove",I=T?"touchend":"mouseup",P=e=>{let t=e;return e.touches&&"number"==typeof e.touches.length&&e.touches.length>0&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY}},Y=(e,t,n,s="#222",o=2)=>{e.save(),e.lineCap="round",e.lineWidth=o,e.strokeStyle=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(t.x,t.y),e.stroke(),e.restore()},z=e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height)};var D=e=>{const{channel:t,color:n="#222",size:o=2,width:c=360,height:i=360,onCanvas:l}=e,[r,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(2);return(0,a.useEffect)((()=>{if(r){const e=r.getContext("2d"),s=w(t);s.ondata=t=>{const n=t.detail;if("track"===n.command){const{from:t,to:s,color:o="#222",size:a=2}=n;Y(e,s,t,o,a)}else"reset"===n.command&&z(e)};const{left:o,top:a}=r.getBoundingClientRect();let c=0,i=0,l=!1;const d=e=>{const t=P(e),n=t.clientX-o,s=t.clientY-a;c=n,i=s,l=!0},m=t=>{const r=P(t),d=r.clientX-o,m=r.clientY-a;if(l){const t={x:c,y:i},o={x:d,y:m};Y(e,o,t,n,u),s.sendData({command:"track",from:t,to:o,color:n,size:u})}c=d,i=m},v=()=>{l=!1};return r.addEventListener(S,d),document.addEventListener(B,m),document.addEventListener(I,v),()=>{s.close(),r.removeEventListener(S,d),document.removeEventListener(I,v),document.removeEventListener(B,m)}}}),[r,t,n,o,u]),(0,a.useEffect)((()=>{const e=w(t);e.sendData({command:"reset"}),e.close()}),[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("canvas",{ref:d,className:"live-canvas",width:c,height:i}),(0,s.jsx)("input",{value:u,type:"range",min:1,max:20,onChange:e=>{m(Number(e.target.value))}}),(0,s.jsx)("button",{disabled:!r,onClick:()=>{const e=w(t);if(e.sendData({command:"reset"}),e.close(),!r)return;const n=r.getContext("2d");z(n)},children:"reset"})]})},X=()=>{const{channel:e="",color:t="#222"}=(0,i.g)();return(0,s.jsxs)("div",{className:"live-canvas-page",children:[(0,s.jsxs)("div",{children:["Live Canvas [",e,"] [",t,"]"]}),(0,s.jsx)(D,{channel:e,color:t})]})},q=()=>(0,s.jsx)("div",{children:"About"}),H=n(681),O={};O.styleTagTransform=b(),O.setAttributes=x(),O.insert=v().bind(null,"head"),O.domAPI=u(),O.insertStyleElement=p(),r()(H.A,O),H.A&&H.A.locals&&H.A.locals;var R=()=>(0,s.jsx)(a.StrictMode,{children:(0,s.jsxs)(c.I9,{children:[(0,s.jsx)(y,{}),(0,s.jsxs)(i.BV,{children:[(0,s.jsx)(i.qh,{path:"/",element:(0,s.jsx)(k,{})}),(0,s.jsx)(i.qh,{path:"/live-canvas/:channel/:color",element:(0,s.jsx)(X,{})}),(0,s.jsx)(i.qh,{path:"/about",element:(0,s.jsx)(q,{})})]})]})});const M=document.getElementById("root");M&&(0,o.H)(M).render((0,s.jsx)(R,{}))}},function(e){e.O(0,[411,13],(function(){return e(e.s=331)})),e.O()}]);